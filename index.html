<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Afla ce nu stii!</title>

  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.PNG">
  <link rel="icon" href="apple-touch-icon.PNG">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="Afla ce nu stii!">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#764ba2">
  <style>
    body{
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
      background:linear-gradient(135deg,#667eea,#764ba2);
      color:#fff;margin:0;padding:20px;text-align:center;
    }
    h1{font-size:28px;margin:10px 0 14px;}

    .card{
      background:rgba(255,255,255,0.15);
      border-radius:16px;
      padding:18px;
      max-width:640px;
      margin:auto;
      box-shadow:0 10px 30px rgba(0,0,0,0.2);
    }

    .meta{
      display:flex;justify-content:space-between;gap:10px;
      font-size:14px;margin-bottom:12px;opacity:0.95;
    }

    .question{font-size:20px;margin:10px 0 14px;}
    input{
      width:92%;padding:12px;border-radius:10px;border:none;
      font-size:16px;margin-bottom:10px;
    }
    button{
      padding:12px 18px;border-radius:12px;border:none;font-size:16px;
      margin:6px 0;cursor:pointer;font-weight:800;width:100%;
    }
    .main-btn{background:#ffd166;color:#333;}
    .answer-btn{background:#ffe8a3;color:#333;}
    .correct{background:#06d6a0 !important;color:#003 !important;}
    .wrong{background:#ef476f !important;color:#fff !important;}

    .answers{display:none;margin-top:8px;}
    .result{margin-top:12px;font-size:18px;font-weight:900;}
    .hint{margin-top:6px;font-size:14px;opacity:0.92;}

    .disabled{pointer-events:none;opacity:0.65;}
    .row{display:grid;gap:8px;margin-top:6px;}

    .badge{
      margin-top:12px;padding:10px;border-radius:12px;font-weight:800;
      background:rgba(6,214,160,0.95);color:#003;display:none;
    }

    /* Overlay screens */
    .overlay{
      position:fixed;inset:0;background:rgba(0,0,0,0.55);
      display:none;align-items:center;justify-content:center;
      padding:20px;z-index:9999;
    }
    .modal{
      width:100%;max-width:640px;border-radius:16px;
      background:rgba(20,20,30,0.95);
      box-shadow:0 10px 30px rgba(0,0,0,0.35);
      padding:18px;text-align:left;
    }
    .modal{
     overflow: visible;
    }
    .modal h2{margin:0 0 8px;font-size:20px;}
    .modal p{margin:6px 0 12px;opacity:0.9;}

    .pill{
      display:inline-block;padding:6px 10px;border-radius:999px;
      background:rgba(255,255,255,0.12);
      margin-right:6px;font-size:12px;opacity:0.95;
    }

    /* Test picker grid */
    .grid{
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      gap:10px;
    }
    @media (max-width:520px){
      .grid{grid-template-columns: repeat(4, 1fr);}
    }
    @media (max-width:420px){
      .grid{grid-template-columns: repeat(3, 1fr);}
    }
    .test-tile{
      background:rgba(255,255,255,0.12);
      border-radius:14px;
      padding:10px 8px;
      text-align:center;
      cursor:pointer;
      user-select:none;
      box-shadow:0 6px 16px rgba(0,0,0,0.15);
      border:1px solid rgba(255,255,255,0.14);
    }
    .test-tile.locked{opacity:0.55; cursor:not-allowed;}
    
    /* FIX iOS ‚Äì prevenire tƒÉiere iconi»õe pe primul r√¢nd */
    .test-tile{
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .test-num{font-weight:900; font-size:14px; margin-top:4px;}
    .test-icon{
      font-size: 22px;
      line-height: 1.35;     /* important pe iPhone */
      padding-top: 2px;      /* previne ‚ÄútƒÉierea‚Äù sus */
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .test-sub{font-size:12px; opacity:0.9; margin-top:4px;}
    .test-score{
      margin-top:6px;
      font-size:12px;
      background:rgba(255,255,255,0.12);
      border-radius:999px;
      padding:4px 8px;
      display:inline-block;
      opacity:0.95;
    }
    /* FIX iOS safe-area ‚Äì primul r√¢nd de teste tƒÉiat */
@supports (padding: env(safe-area-inset-top)) {
  .modal {
    padding-top: calc(18px + env(safe-area-inset-top));
  }
}
    .overlay{
  overflow-y: auto;
}
    /* FIX iPhone: modalul e prea √Ænalt »ôi se taie sus din cauza centrarƒÉrii */
.overlay{
  align-items: flex-start;           /* NU mai centra vertical */
  overflow-y: auto;                  /* permite scroll pe overlay */
  -webkit-overflow-scrolling: touch; /* scroll mai bun pe iOS */
}

/* modalul √Æncepe sub safe-area »ôi are max-height + scroll intern */
@supports (padding: env(safe-area-inset-top)) {
  .modal{
    margin-top: calc(20px + env(safe-area-inset-top));
    margin-bottom: 20px;
    max-height: calc(100vh - 40px - env(safe-area-inset-top));
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
}

/* fallback pentru browsere fƒÉrƒÉ env() */
@supports not (padding: env(safe-area-inset-top)) {
  .modal{
    margin-top: 20px;
    margin-bottom: 20px;
    max-height: calc(100vh - 40px);
    overflow-y: auto;
  }
}

  /* Top bar: st√¢nga (Test/√éntrebare), centru (Teste), dreapta (Scor test) */
.topbar{
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: start;
  gap: 10px;
  margin-bottom: 12px;
}

.meta-left, .meta-right{
  font-size: 14px;
  opacity: 0.95;
  white-space: pre-line; /* permite \n din JS */
}

.meta-right{
  text-align: right;
}

.tests-btn{
  width: auto;          /* nu full width */
  padding: 10px 14px;   /* pu»õin mai mic */
  margin: 0;            /* fƒÉrƒÉ spacing extra */
}  
.badge.clickable{
  cursor: pointer;
  text-decoration: underline;
}
  
  </style>
</head>

<body>
<h1>üêò Afla ce nu stii!</h1>

<!-- Mode Picker -->
<div class="overlay" id="overlayMode">
  <div class="modal">
    <h2>Alege modul de joc</h2>
    <p>
      <span class="pill">Teste random</span>
      <span class="pill">FƒÉrƒÉ repetƒÉri</span>
      <span class="pill">Progres salvat</span>
      <span class="pill">Deblocare cu prag 7/10</span>
    </p>
    <button class="main-btn" onclick="startNewGame('mix')">Mix (toate √ÆntrebƒÉrile)</button>
    <button class="main-btn" onclick="startNewGame('hard')">Hard only (doar dificile)</button>
  </div>
</div>

<!-- Test Picker -->
<div class="overlay" id="overlayTests">
  <div class="modal">
    <h2>Alege testul</h2>
    <p style="margin-bottom:10px;">
  Deblochezi urmƒÉtorul test dacƒÉ ai <b>minim 7 rƒÉspunsuri corecte</b> √Æn testul anterior.
</p>
    <p id="totalScoreBanner" style="margin:0 0 10px; font-weight:800;"></p>
    <div class="grid" id="testsGrid"></div>
    <div class="row" style="margin-top:12px;">
      <button class="main-btn" onclick="confirmChangeMode()">SchimbƒÉ modul</button>
      <button class="main-btn" onclick="closeTests()">√énapoi</button>
    </div>
  </div>
</div>

<div class="card">
<div class="topbar">
  <div id="progress" class="meta-left"></div>

  <button class="main-btn tests-btn" onclick="openTests()">üìö Teste</button>

  <div id="score" class="meta-right"></div>
</div>

  <div class="question" id="question"></div>

  <input type="text" id="textAnswer" placeholder="Scrie rƒÉspunsul tƒÉu..." />

  <div class="row">
    <button class="main-btn" id="checkBtn" onclick="checkTextAnswer()">VerificƒÉ rƒÉspunsul</button>
    <button class="main-btn" id="toggleBtn" onclick="toggleAnswers()">Afi»ôeazƒÉ variantele de rƒÉspuns</button>
  </div>

  <div class="answers" id="answers"></div>

  <div class="result" id="result"></div>
  <div class="hint" id="hint"></div>
  <div id="badge" class="badge"></div>

  <div class="row">
  <button class="main-btn disabled" id="nextBtn" onclick="nextStep()">UrmƒÉtoarea √Æntrebare</button>
</div>
</div>

<script>
  // ===== CONFIG =====
  const QUESTIONS_PER_TEST = 10;
  const UNLOCK_THRESHOLD = 7;
  const STORAGE_KEY = "afla_ce_nu_stii_unlocks_v1";

  // ===== HELPERS =====
  function shuffleArray(arr){
    for(let i=arr.length-1;i>0;i--){
      const j=Math.floor(Math.random()*(i+1));
      [arr[i],arr[j]]=[arr[j],arr[i]];
    }
    return arr;
  }
  function normalize(s){
    return (s||"")
      .trim().toLowerCase()
      .normalize("NFD").replace(/[\u0300-\u036f]/g,"")
      .replace(/[^\w\s-]/g,"")
      .replace(/\s+/g," ");
  }
  function dearticulate(word){
    const w=normalize(word);
    if(!w || w.includes(" ")) return w;
    const endings=["ului","elor","ilor","lor","ile","ii","ul","le","ea","a"];
    for(const end of endings){
      if(w.length>end.length+1 && w.endsWith(end)){
        return w.slice(0,-end.length);
      }
    }
    return w;
  }
  function answerVariants(s){
    const n=normalize(s);
    const d=dearticulate(s);
    return new Set([n,d].filter(Boolean));
  }

function tokens(s){
  return normalize(s).split(" ").filter(Boolean);
}

// Cuvinte "generice" care NU trebuie sƒÉ valideze singure un rƒÉspuns
const GENERIC_TOKENS = new Set([
  "stramtoarea","stramtoare",
  "raul","raului","rau","fluviu","fluviul",
  "munte","muntele","muntii",
  "mare","marea","ocean","oceanul",
  "lacul","lac","insula","insula",
  "oras","orasul","capitala",
  "tara","tarii","stat","statul",
  "republica","regatul","imperiul",
  "curentul","curent",
  "efectul","efect",
  "teorema","legea","legile",
  "tratatul","tratat",
  "galaxia","galaxie",
  "planeta","planetei",
  "vitamina"
]);

// Edit-distance (Levenshtein) cu oprire rapidƒÉ dacƒÉ depƒÉ»ôe»ôte 1
function editDistanceAtMost1(a, b){
  a = normalize(a);
  b = normalize(b);
  if (a === b) return true;

  const la = a.length, lb = b.length;
  if (Math.abs(la - lb) > 1) return false;

  // dacƒÉ aceea»ôi lungime -> max 1 substitu»õie
  if (la === lb) {
    let diff = 0;
    for (let i = 0; i < la; i++) {
      if (a[i] !== b[i]) {
        diff++;
        if (diff > 1) return false;
      }
    }
    return true; // diff = 1
  }

  // dacƒÉ diferƒÉ cu 1 -> max 1 inser»õie/»ôtergere
  const shorter = la < lb ? a : b;
  const longer  = la < lb ? b : a;

  let i = 0, j = 0;
  let used = false;
  while (i < shorter.length && j < longer.length) {
    if (shorter[i] === longer[j]) {
      i++; j++;
    } else {
      if (used) return false;
      used = true;
      j++; // sƒÉrim un caracter din longer (inser»õie/»ôtergere)
    }
  }
  return true;
}

// VerificƒÉ dacƒÉ user a dat un singur cuv√¢nt "specific" din solu»õie
function singleTokenMatchesSolution(userToken, correctPhrase){
  if (!userToken || userToken.length < 4) return false; // evitƒÉ "a", "de", etc.
  if (GENERIC_TOKENS.has(userToken)) return false;      // evitƒÉ "stramtoarea"

  const cTokens = tokens(correctPhrase);
  // potrivire exactƒÉ token
  if (cTokens.includes(userToken)) return true;

  // potrivire fuzzy (¬±1 literƒÉ) fa»õƒÉ de ORICE token din solu»õie
  return cTokens.some(ct => editDistanceAtMost1(userToken, ct));
}

function isPartialMatch(user, correct){
  const u = normalize(user);
  const c = normalize(correct);
  if (!u || !c) return false;

  const uTokens = tokens(u);
  const cTokens = tokens(c);

  // 1) dacƒÉ user a scris UN SINGUR cuv√¢nt:
  // acceptƒÉm dacƒÉ e un token "specific" din solu»õie (cu fuzzy ¬±1 literƒÉ)
  if (uTokens.length === 1) {
    return singleTokenMatchesSolution(uTokens[0], c);
  }

  // 2) dacƒÉ user a scris mai multe cuvinte:
  // acceptƒÉm dacƒÉ fiecare token user e prezent √Æn solu»õie,
  // fie exact, fie cu ¬±1 literƒÉ vs un token din solu»õie.
  // (dar ignorƒÉm token-urile generice din user: dacƒÉ scrie "stramtoarea" + "bering",
  // "bering" decide, "stramtoarea" nu trebuie sƒÉ strice)
  const filtered = uTokens.filter(t => t.length >= 2); // pƒÉstrƒÉm relevante
  let hasSpecific = false;

  for (const ut of filtered) {
    if (GENERIC_TOKENS.has(ut)) continue;

    hasSpecific = true;
    const ok = cTokens.includes(ut) || cTokens.some(ct => editDistanceAtMost1(ut, ct));
    if (!ok) return false;
  }

  // dacƒÉ user a scris doar termeni generici (ex: "stramtoarea"), nu acceptƒÉm
  return hasSpecific;
}

function isCorrectAnswer(userAnswer, correct){
  const correctList = Array.isArray(correct) ? correct : [correct];

  // variantele user (normalizat + de-articulat)
  const userVars = answerVariants(userAnswer);

  for (const c of correctList) {
    const corrVars = answerVariants(c);

    // 1) match exact (incl. de-articulare)
    for (const uv of userVars) {
      if (corrVars.has(uv)) return true;
    }

    // 2) match par»õial + fuzzy (regulile tale)
    for (const uv of userVars) {
      if (isPartialMatch(uv, c)) return true;
    }
  }

  return false;
}

  function showOverlay(id, show){
    document.getElementById(id).style.display = show ? "flex" : "none";
  }

  function setNextEnabled(enabled){
    document.getElementById("nextBtn").classList.toggle("disabled", !enabled);
  }
  function setControlsEnabled(enabled){
    document.getElementById("textAnswer").disabled = !enabled;
    document.getElementById("checkBtn").classList.toggle("disabled", !enabled);
    document.getElementById("toggleBtn").classList.toggle("disabled", !enabled);
    document.getElementById("answers").classList.toggle("disabled", !enabled);
  }

  // ===== QUESTION BANK (minimal demo)
  // IMPORTANT: pƒÉstreazƒÉ aici listele tale complete EASY_QUESTIONS »ôi HARD_QUESTIONS (100/100).
  const EASY_QUESTIONS = [
    // =========================
  // QUESTIONS BANK (200)
  // NOTE: pƒÉstrez structura: {q, c, o}
  // =========================

  // ---- 100 (basic/medium) ----
  
    {q:"Care este capitala Fran»õei?", c:"Paris", o:["Paris","Lyon","Marseille","Nisa"]},
    {q:"C√¢te continente existƒÉ pe PƒÉm√¢nt (modelul uzual)?", c:"7", o:["5","6","7","8"]},
    {q:"Care este cea mai mare planetƒÉ din Sistemul Solar?", c:"Jupiter", o:["Marte","Jupiter","Saturn","Neptun"]},
    {q:"√én ce an a ajuns omul pe LunƒÉ?", c:"1969", o:["1959","1965","1969","1972"]},
    {q:"Care este capitala Japoniei?", c:"Tokyo", o:["Kyoto","Seul","Tokyo","Osaka"]},
    {q:"Formula chimicƒÉ a apei este‚Ä¶", c:"H2O", o:["CO2","O2","H2O","NaCl"]},
    {q:"Cel mai mare ocean al lumii este‚Ä¶", c:"Pacific", o:["Atlantic","Indian","Arctic","Pacific"]},
    {q:"Care este simbolul chimic pentru aur?", c:"Au", o:["Ag","Au","Fe","Hg"]},
    {q:"Cine a pictat Mona Lisa?", c:"Leonardo da Vinci", o:["Michelangelo","Van Gogh","Leonardo da Vinci","Picasso"]},
    {q:"C√¢»õi ani are un deceniu?", c:"10", o:["5","10","12","20"]},

    {q:"Ce »õarƒÉ are forma de ‚ÄûcizmƒÉ‚Äù pe hartƒÉ?", c:"Italia", o:["Spania","Italia","Grecia","Portugalia"]},
    {q:"Ce gaz este cel mai abundent √Æn atmosfera PƒÉm√¢ntului?", c:"Azot", o:["Oxigen","Azot","CO2","Hidrogen"]},
    {q:"Cel mai √Ænalt munte din lume este‚Ä¶", c:"Everest", o:["K2","Everest","Mont Blanc","Kilimanjaro"]},
    {q:"Care este capitala Rom√¢niei?", c:"Bucure»ôti", o:["Cluj-Napoca","Ia»ôi","Timi»ôoara","Bucure»ôti"]},
    {q:"Ce organ pompeazƒÉ s√¢ngele √Æn corp?", c:"Inima", o:["PlƒÉm√¢nul","Ficatul","Inima","Rinichiul"]},
    {q:"Cine a scris ‚ÄûRomeo »ôi Julieta‚Äù?", c:"William Shakespeare", o:["Goethe","Shakespeare","Dante","Moli√®re"]},
    {q:"Care este cea mai micƒÉ unitate a vie»õii?", c:"Celula", o:["Atomul","Molecula","Celula","Organul"]},
    {q:"Care este moneda oficialƒÉ a SUA?", c:["dolarul","dolarul american","usd"], o:["Dolarul","Euro","Lira","Yen"]},
    {q:"Care este capitala Germaniei?", c:"Berlin", o:["Hamburg","Munchen","Frankfurt","Berlin"]},
    {q:"√én ce sport se folose»ôte termenul ‚Äûlove‚Äù pentru 0?", c:"Tenis", o:["Fotbal","Baschet","Tenis","Rugby"]},

    {q:"Ce planetƒÉ este numitƒÉ ‚ÄûPlaneta Ro»ôie‚Äù?", c:"Marte", o:["Venus","Marte","Mercur","Uranus"]},
    {q:"Care este capitala Spaniei?", c:"Madrid", o:["Barcelona","Sevilla","Madrid","Valencia"]},
    {q:"Ce instrument mƒÉsoarƒÉ temperatura?", c:"Termometru", o:["Barometru","Higrometru","Termometru","Altimetru"]},
    {q:"Care este cel mai lung fluviu din lume (√Æn multe surse uzuale)?", c:["Nil","Nilul"], o:["Amazonul","Nilul","Yangtze","Mississippi"]},
    {q:"C√¢te minute are o orƒÉ?", c:"60", o:["50","60","90","100"]},
    {q:"Care este capitala Greciei?", c:"Atena", o:["Atena","Salonic","Patras","Heraklion"]},
    {q:"Care este cel mai mare mamifer?", c:"Balena albastrƒÉ", o:["Elefantul","Balena albastrƒÉ","Girafa","Rechinul alb"]},
    {q:"Care este elementul chimic cu simbolul O?", c:"Oxigen", o:["Osmium","Oxigen","Aur","Zinc"]},
    {q:"Ce se mƒÉsoarƒÉ √Æn wa»õi (W)?", c:"Puterea", o:["Tensiunea","Curentul","Puterea","Rezisten»õa"]},
    {q:"Cine a formulat teoria relativitƒÉ»õii?", c:"Albert Einstein", o:["Newton","Einstein","Galilei","Tesla"]},

    {q:"Care este capitala Portugaliei?", c:"Lisabona", o:["Porto","Lisabona","Braga","Faro"]},
    {q:"Cum se nume»ôte procesul prin care plantele √Æ»ôi produc hrana?", c:"Fotosinteza", o:["Respira»õia","Fermenta»õia","Fotosinteza","Evaporarea"]},
    {q:"√én ce »õarƒÉ se aflƒÉ ora»ôul Marrakech?", c:"Maroc", o:["Egipt","Maroc","Algeria","Tunisia"]},
    {q:"Care este capitala Canadei?", c:"Ottawa", o:["Toronto","Vancouver","Ottawa","Montreal"]},
    {q:"Care este cea mai mare »õarƒÉ ca suprafa»õƒÉ?", c:"Rusia", o:["Canada","China","SUA","Rusia"]},
    {q:"Ce numƒÉr roman reprezintƒÉ X?", c:"10", o:["5","10","50","100"]},
    {q:"Cum se nume»ôte cel mai mare de»ôert cald?", c:"Sahara", o:["Gobi","Sahara","Kalahari","Atacama"]},
    {q:"√én ce ora»ô se aflƒÉ Colosseumul?", c:"Roma", o:["Atena","Roma","Paris","Istanbul"]},
    {q:"Ce limbƒÉ se vorbe»ôte oficial √Æn Brazilia?", c:"PortughezƒÉ", o:["SpaniolƒÉ","PortughezƒÉ","FrancezƒÉ","ItalianƒÉ"]},
    {q:"C√¢te zile are un an bisect?", c:"366", o:["365","366","364","360"]},

    {q:"Care este capitala Turciei?", c:"Ankara", o:["Istanbul","Izmir","Ankara","Bursa"]},
    {q:"Ce planetƒÉ este cea mai apropiatƒÉ de Soare?", c:"Mercur", o:["Mercur","Venus","Marte","Saturn"]},
    {q:"Care este capitala Egiptului?", c:"Cairo", o:["Alexandria","Giza","Cairo","Luxor"]},
    {q:"Cum se nume»ôte unitatea de mƒÉsurƒÉ pentru frecven»õƒÉ?", c:"Hertz", o:["Newton","Hertz","Joule","Pascal"]},
    {q:"Ce organ este responsabil √Æn principal cu detoxifierea s√¢ngelui?", c:"Ficatul", o:["PlƒÉm√¢nii","Ficatul","Stomacul","Pielea"]},
    {q:"Care este capitala Austriei?", c:"Viena", o:["Viena","Graz","Salzburg","Linz"]},
    {q:"√én ce sport se marcheazƒÉ ‚Äûtouchdown‚Äù?", c:"Fotbal american", o:["Rugby","Fotbal american","Hochei","Cricket"]},
    {q:"Ce metal are simbolul Fe?", c:"Fier", o:["Fluor","Fier","Fosfor","Franciu"]},
    {q:"Cine a scris ‚ÄûIon‚Äù?", c:"Liviu Rebreanu", o:["M. Eminescu","L. Rebreanu","I.L. Caragiale","C. Petrescu"]},
    {q:"Care este capitala Suediei?", c:"Stockholm", o:["Oslo","Stockholm","Helsinki","Copenhaga"]},

    {q:"Care este capitala Norvegiei?", c:"Oslo", o:["Oslo","Bergen","Trondheim","Stavanger"]},
    {q:"Ce instrument mƒÉsoarƒÉ presiunea atmosfericƒÉ?", c:"Barometru", o:["Termometru","Barometru","Anemometru","Cronometru"]},
    {q:"√én ce »õarƒÉ se aflƒÉ Machu Picchu?", c:"Peru", o:["Mexic","Peru","Chile","Bolivia"]},
    {q:"Care este capitala Chinei?", c:"Beijing", o:["Shanghai","Beijing","Hong Kong","Shenzhen"]},
    {q:"Ce planetƒÉ are inele foarte vizibile?", c:"Saturn", o:["Jupiter","Saturn","Marte","Venus"]},
    {q:"C√¢te secunde are un minut?", c:"60", o:["30","45","60","90"]},
    {q:"Care este capitala Elve»õiei?", c:"Berna", o:["Zurich","Geneva","Berna","Basel"]},
    {q:"Ce este ‚ÄûCPU‚Äù √Æntr-un computer?", c:"Procesorul", o:["Memoria","Procesorul","Placa video","Hard disk-ul"]},
    {q:"√én ce continent se aflƒÉ Kenya?", c:"Africa", o:["Asia","Europa","Africa","America de Sud"]},
    {q:"Care este cel mai dur mineral pe scara Mohs?", c:"Diamant", o:["Cuar»õ","Granit","Diamant","Safir"]},

    {q:"Care este capitala Australiei?", c:"Canberra", o:["Sydney","Melbourne","Canberra","Perth"]},
    {q:"Cine a compus ‚ÄûAnotimpurile‚Äù (The Four Seasons)?", c:"Vivaldi", o:["Mozart","Bach","Vivaldi","Beethoven"]},
    {q:"Ce numƒÉr roman reprezintƒÉ L?", c:"50", o:["20","40","50","100"]},
    {q:"Care este capitala Irlandei?", c:"Dublin", o:["Dublin","Cork","Galway","Belfast"]},
    {q:"Ce organ ajutƒÉ la respira»õie?", c:"PlƒÉm√¢nii", o:["Inima","PlƒÉm√¢nii","Ficatul","Pancreasul"]},
    {q:"√én ce sport se folose»ôte ‚Äûpuck‚Äù?", c:"Hochei", o:["Tenis","Hochei","Handbal","Golf"]},
    {q:"Ce instrument mƒÉsoarƒÉ viteza v√¢ntului?", c:"Anemometru", o:["Barometru","Anemometru","Hidrometru","Volmetru"]},
    {q:"C√¢te coarde are o vioarƒÉ?", c:"4", o:["4","5","6","7"]},
    {q:"Care este capitala Poloniei?", c:"Var»ôovia", o:["Krak√≥w","Gda≈Ñsk","Var»ôovia","Wroc≈Çaw"]},
    {q:"Ce continent are cele mai multe »õƒÉri?", c:"Africa", o:["Europa","Africa","Asia","America de Nord"]},

    {q:"√én ce »õarƒÉ se aflƒÉ Taj Mahal?", c:"India", o:["Pakistan","India","Nepal","Sri Lanka"]},
    {q:"Care este capitala Olandei?", c:"Amsterdam", o:["Rotterdam","Haga","Amsterdam","Utrecht"]},
    {q:"Ce vitaminƒÉ este asociatƒÉ cu lumina soarelui?", c:"Vitamina D", o:["Vitamina A","Vitamina B12","Vitamina C","Vitamina D"]},
    {q:"Cine a scris ‚ÄûDivina Comedie‚Äù?", c:"Dante Alighieri", o:["Dante","Homer","Virgiliu","Cervantes"]},
    {q:"Care este capitala Ungariei?", c:"Budapesta", o:["Budapesta","Debrecen","Szeged","P√©cs"]},
    {q:"C√¢te elemente are tabelul periodic (recunoscut √Æn prezent)?", c:"118", o:["112","116","118","120"]},
    {q:"Care este capitala Belgiei?", c:"Bruxelles", o:["Bruxelles","Anvers","Gent","Bruges"]},
    {q:"Ce culoare rezultƒÉ din amestecul albastru + galben?", c:"Verde", o:["Violet","Portocaliu","Verde","Ro»ôu"]},
    {q:"√én ce »õarƒÉ se aflƒÉ Marea BarierƒÉ de Corali?", c:"Australia", o:["Australia","Indonezia","Filipine","Noua ZeelandƒÉ"]},
    {q:"Care este capitala Danemarcei?", c:"Copenhaga", o:["Copenhaga","Aarhus","Odense","Malmo"]},

    {q:"Care este capitala Finlandei?", c:"Helsinki", o:["Helsinki","Turku","Tampere","Oulu"]},
    {q:"Cine a pictat ‚ÄûNoaptea √ÆnstelatƒÉ‚Äù?", c:"Vincent van Gogh", o:["Monet","Van Gogh","Da Vinci","Rembrandt"]},
    {q:"√én ce ora»ô se aflƒÉ Turnul Eiffel?", c:"Paris", o:["Londra","Roma","Paris","Berlin"]},
    {q:"Care este capitala Cehiei?", c:"Praga", o:["Brno","Praga","Ostrava","Plzen"]},
    {q:"Ce ocean spalƒÉ coasta de est a SUA?", c:"Atlantic", o:["Pacific","Atlantic","Indian","Arctic"]},
    {q:"Care este cel mai mare organ al corpului uman?", c:"Pielea", o:["Inima","Pielea","Ficatul","PlƒÉm√¢nii"]},
    {q:"C√¢te luni are un an?", c:"12", o:["10","11","12","13"]},
    {q:"Ce »õarƒÉ are capitala la Viena?", c:"Austria", o:["Australia","Austria","Elve»õia","Belgia"]},
    {q:"Cum se nume»ôte »ôtiin»õa care studiazƒÉ cutremurele?", c:"Seismologie", o:["Meteorologie","Seismologie","Ecologie","Astronomie"]},
    {q:"Care este capitala Argentinei?", c:"Buenos Aires", o:["Santiago","Montevideo","Buenos Aires","Lima"]},

    {q:"Care este capitala Ecuador?", c:"Quito", o:["Santiago","Quito","Ecuador city","Lima"]},
    {q:"Care este capitala Mexicului?", c:"Ciudad de M√©xico", o:["Guadalajara","Monterrey","Ciudad de M√©xico","Canc√∫n"]},
    {q:"√én ce sport se folose»ôte termenul ‚Äûcheckmate‚Äù?", c:"»òah", o:["»òah","Go","Bridge","Dame"]},
    {q:"Care este capitala Thailandei?", c:"Bangkok", o:["Bangkok","Phuket","Chiang Mai","Pattaya"]},
    {q:"Ce planetƒÉ este cunoscutƒÉ ca ‚ÄûLuceafƒÉrul de diminea»õƒÉ‚Äù (√Æn mod popular)?", c:"Venus", o:["Venus","Marte","Mercur","Jupiter"]},
    {q:"C√¢te grade are un unghi drept?", c:"90", o:["45","60","90","180"]},
    {q:"Care este capitala Coreei de Sud?", c:"Seul", o:["Busan","Seul","Incheon","Daegu"]},
    {q:"Cum se nume»ôte moneda Japoniei?", c:"Yen", o:["Yuan","Won","Yen","Rupie"]},
    {q:"Ce instrument are taste albe »ôi negre »ôi corzi √Æn interior?", c:"Pian", o:["ChitarƒÉ","Pian","VioarƒÉ","Flaut"]},
    {q:"Ce continent este cel mai mic ca suprafa»õƒÉ?", c:"Australia", o:["Europa","Australia","America de Sud","Antarctica"]},
  ];

  // ---- 100 (hard) ----
  const HARD_QUESTIONS = [
    {q:"Care este numele str√¢mtorii care separƒÉ Asia de America de Nord?", c:"Str√¢mtoarea Bering", o:["Gibraltar","Bering","Bosfor","Magellan"]},
    {q:"√én ce an a fost semnat Tratatul de la Maastricht?", c:"1992", o:["1989","1992","1997","2004"]},
    {q:"Care este unitatea SI pentru rezisten»õa electricƒÉ?", c:"Ohm", o:["Watt","Ohm","Volt","Tesla"]},
    {q:"Ce pictor este asociat cu lucrarea ‚ÄûGuernica‚Äù?", c:"Pablo Picasso", o:["Salvador Dal√≠","Pablo Picasso","Goya","Matisse"]},
    {q:"Care este capitala Mongoliei?", c:"Ulaanbaatar", o:["Astana","Ulaanbaatar","Ta»ôkent","Bi»ôkek"]},
    {q:"Ce organelƒÉ produce majoritatea ATP-ului?", c:"Mitocondria", o:["Ribozomul","Mitocondria","Lizozomul","Aparatul Golgi"]},
    {q:"Ce limbƒÉ are cei mai mul»õi vorbitori nativi?", c:"Mandarina", o:["EnglezƒÉ","SpaniolƒÉ","Mandarina","Hindi"]},
    {q:"Curentul oceanic cald ce influen»õeazƒÉ Europa de Vest este‚Ä¶", c:"Curentul Golfului", o:["Labrador","Curentul Golfului","Humboldt","Kuroshio"]},
    {q:"Cine a scris ‚ÄûProcesul‚Äù?", c:"Franz Kafka", o:["Albert Camus","Franz Kafka","Thomas Mann","Hermann Hesse"]},
    {q:"Care este formula chimicƒÉ a amoniacului?", c:"NH3", o:["NH3","NO2","H2S","CH4"]},

    {q:"‚ÄûPrimul razboi mondial a avut loc √Æn intervalul‚Ä¶", c:"1914‚Äì1918", o:["1914‚Äì1918","1939‚Äì1945","1921‚Äì1925","1948‚Äì1958"]},
    {q:"Care este capitala Noii Zeelande?", c:"Wellington", o:["Auckland","Wellington","Christchurch","Dunedin"]},
    {q:"Cre»ôterea frecven»õei percepute din cauza mi»ôcƒÉrii sursei se nume»ôte‚Ä¶", c:"Efectul Doppler", o:["Efectul Hall","Efectul Doppler","Efectul Coriolis","Efectul Joule"]},
    {q:"Romanul care √Æncepe cu ‚ÄûToate familiile fericite se aseamƒÉnƒÉ‚Ä¶‚Äù este‚Ä¶", c:"Anna Karenina", o:["RƒÉzboi »ôi pace","Anna Karenina","Fra»õii Karamazov","Madame Bovary"]},
    {q:"Elementul cu numƒÉrul atomic 26 este‚Ä¶", c:"Fier", o:["Cobalt","Nichel","Fier","Cupru"]},
    {q:"Calea Lactee este o galaxie‚Ä¶", c:"SpiralƒÉ baratƒÉ", o:["ElipticƒÉ","LenticularƒÉ","SpiralƒÉ baratƒÉ","NeregulatƒÉ"]},
    {q:"Cea mai mare insulƒÉ din lume (excluz√¢nd continentele) este‚Ä¶", c:"Groenlanda", o:["Borneo","Madagascar","Groenlanda","Noua Guinee"]},
    {q:"‚ÄûFlautul fermecat‚Äù a fost compus de‚Ä¶", c:"Mozart", o:["Verdi","Mozart","Puccini","Wagner"]},
    {q:"Simbolul chimic al hidrogenului este‚Ä¶", c:"H", o:["He","H","Hi","Hd"]},
    {q:"Tratatul care a pus capƒÉt WWI pentru Germania este‚Ä¶", c:"Tratatul de la Versailles", o:["Trianon","Versailles","Brest-Litovsk","San Stefano"]},

    { q:"Ce perioadƒÉ istoricƒÉ este asociatƒÉ cu ‚ÄûRƒÉzboiul de o sutƒÉ de ani‚Äù?", c:"1337‚Äì1453", o:["1215‚Äì1270","1337‚Äì1453","1492‚Äì1598","1618‚Äì1648"] },
    { q:"Care este capitala Africii de Sud?", c:"Johannesburg", o:["Addis Abeba","Wellington","Christchurch","Johannesburg"] },
    { q:"Principiul conform caruia 80% din rezultate provin din 20% de eforturi se numeste", c:"Pareto", o:["Efectul Hall","Pareto","Coriolis","Principiul inversƒÉrii"] },
    { q:"Stefan Gheorghidiu este un personaj din romanul...‚Äù, c:"Ultima noapte de dragoste, intaia noapte de razboi", o:["RƒÉzboi »ôi pace","Ultima noapte de dragoste, intaia noapte de razboi","Fra»õii Karamazov","Enigma Otiliei"] },
    { q:"Care este capitala Pakistanului?", c:"Islamabad", o:["Karachi","Lahore","Islamabad","Peshawar"] },
    { q:"Ce element chimic are numƒÉrul atomic 8?", c:"Oxigen", o:["Carbon","Azot","Fier","Oxigen"] },
    { q:"Care este a patra planeta de la soare?", c:"Marte", o:["Marte","Pamant","Jupiter","Neptun"] },
    { q:"Care este cea mai mare insulƒÉ din lume (fƒÉrƒÉ continente)?", c:"Groenlanda", o:["Borneo","Madagascar","Groenlanda","Noua Guinee"] },
    { q:"Ce compozitor a scris opera ‚ÄûFlautul fermecat‚Äù?", c:"Mozart", o:["Verdi","Mozart","Puccini","Wagner"] },
    { q:"Care este simbolul chimic al potasiului?", c:"K", o:["P","Po","K","Pt"] },


    { q:"√én ce »õarƒÉ se aflƒÉ regiunea Transnistria (de facto)?", c:"Republica Moldova", o:["Ucraina","Rom√¢nia","Republica Moldova","Belarus"] },
    { q:"Cine a formulat legile mi»ôcƒÉrii »ôi gravita»õiei clasice?", c:"Isaac Newton", o:["Kepler","Isaac Newton","Faraday","Maxwell"] },
    { q:"Care este capitala Etiopiei?", c:"Addis Abeba", o:["Nairobi","Addis Abeba","Khartoum","Kampala"] },
    { q:"Ce lan»õ muntos separƒÉ Europa de Asia √Æn mod tradi»õional?", c:"Ural", o:["Alpi","Caucaz","Ural","Carpa»õi"] },
    { q:"Cum se nume»ôte procesul de transformare a ARN-ului mesager √Æn proteinƒÉ?", c:"Transla»õie", o:["Transcrip»õie","Transla»õie","Replicare","Muta»õie"] },
    { q:"Cine a inventat si folosit tehnica Blitzkrieg?", c:"Germania", o:["Austria","Cehia","Polonia","Germania"] },
    { q:"Care este capitala Sri LankƒÉi (administrativƒÉ)?", c:"Sri Jayawardenepura Kotte", o:["Colombo","Kandy","Galle","Sri Jayawardenepura Kotte"] },
    { q:"Ce matematician este asociat cu ‚ÄûUltima teoremƒÉ‚Äù care i-a purtat numele?", c:"Fermat", o:["Euler","Gauss","Fermat","Riemann"] },
    { q:"Care este cea mai mare lunƒÉ a lui Saturn?", c:"Titan", o:["Europa","Titan","Ganymede","Triton"] },
    { q:"Ce curent artistic este asociat cu Salvador Dal√≠?", c:"Suprarealism", o:["Impresionism","Suprarealism","Cubism","Baroc"] },


    { q:"Care este capitala Georgiei?", c:"Tbilisi", o:["Batumi","Tbilisi","Yerevan","Baku"] },
    { q:"Ce metal lichid se gƒÉse»ôte la temperatura camerei?", c:"Mercur", o:["Galiu","Mercur","Plumb","Brom"] },
    { q:"√én ce an a cƒÉzut Constantinopolul?", c:"1453", o:["1204","1453","1492","1517"] },
    { q:"Care este capitala Vietnamului?", c:"Hanoi", o:["Ho Chi Minh City","Da Nang","Hanoi","Hue"] },
    { q:"Cine a scris ‚Äû√én cƒÉutarea timpului pierdut‚Äù?", c:"Marcel Proust", o:["Marcel Proust","James Joyce","Hemingway","Faulkner"] },
    { q:"Ce termen desemneazƒÉ studiul insectelor?", c:"Entomologie", o:["Ornitologie","Entomologie","Ihtiologie","Herpetologie"] },
    { q:"Ce »õarƒÉ are capitala la Ljubljana?", c:"Slovenia", o:["Slovacia","Slovenia","Croa»õia","Serbia"] },
    { q:"Cum se nume»ôte stratul atmosferei unde se formeazƒÉ majoritatea norilor?", c:"Troposfera", o:["Stratosfera","Mezosfera","Troposfera","Termosfera"] },
    { q:"Ce este ‚Äûquark‚Äù-ul √Æn fizicƒÉ?", c:"ParticulƒÉ fundamentalƒÉ", o:["MoleculƒÉ","ParticulƒÉ fundamentalƒÉ","Tip de atom","UndƒÉ gravita»õionalƒÉ"] },
    { q:"Care este capitala Tunisiei?", c:"Tunis", o:["Tunis","Sfax","Alger","Tripoli"] },

                                          // (ca sƒÉ fie 100, continuƒÉ cu √ÆntrebƒÉrile hard pe care le-ai avut deja;
    { q:"Ce filosof a scris ‚ÄûCritica ra»õiunii pure‚Äù?", c:"Immanuel Kant", o:["Platon","Immanuel Kant","Hegel","Descartes"] },
    { q:"Care este capitala Nepalului?", c:"Kathmandu", o:["Thimphu","Kathmandu","Dhaka","Colombo"] },
    { q:"Cum se nume»ôte reac»õia de ob»õinere a sƒÉpunului din grƒÉsimi?", c:"Saponificare", o:["Polimerizare","Saponificare","Sublimare","Oxidare"] },
    { q:"Ce fluviu traverseazƒÉ ora»ôul Budapesta?", c:"DunƒÉrea", o:["Tisa","DunƒÉrea","Elba","Oder"] },
    { q:"Cine a compus ‚ÄûCarmina Burana‚Äù?", c:"Carl Orff", o:["Carl Orff","Mahler","Stravinski","Debussy"] },
    { q:"Ce element are simbolul W?", c:"Wolfram", o:["Wolfram","Wismut","Watt","Wuraniu"] },
    { q:"Care este capitala Marocului?", c:"Rabat", o:["Casablanca","Marrakech","Rabat","Fez"] },
    { q:"√én ce an a avut loc Revolu»õia FrancezƒÉ (√Ænceputul uzual)?", c:"1789", o:["1648","1713","1789","1815"] },
    { q:"Ce instrument de naviga»õie indicƒÉ nordul magnetic?", c:"BusolƒÉ", o:["Sextant","BusolƒÉ","Barometru","Altimetru"] },
    { q:"Ce tip de legƒÉturƒÉ chimicƒÉ apare √Æntre Na »ôi Cl √Æn NaCl?", c:"IonicƒÉ", o:["CovalentƒÉ","MetallicƒÉ","IonicƒÉ","Hidrogen"] },


    { q:"Care este capitala Indoneziei (oficial, √Æn prezent, √ÆncƒÉ folositƒÉ larg)?", c:"Jakarta", o:["Jakarta","Bandung","Surabaya","Medan"] },
    { q:"Cum se nume»ôte prima Constitu»õie modernƒÉ a Rom√¢niei (adoptatƒÉ √Æn sec. XIX)?", c:"Constitu»õia din 1866", o:["1848","1866","1877","1918"] },
    { q:"Ce este ‚Äûhabeas corpus‚Äù?", c:"Protec»õie juridicƒÉ √Æmpotriva deten»õiei arbitrare", o:["TaxƒÉ feudalƒÉ","Protec»õie juridicƒÉ √Æmpotriva deten»õiei arbitrare","Titlu nobiliar","ReformƒÉ agrarƒÉ"] },
    { q:"Care este capitala Iranului?", c:"Teheran", o:["Isfahan","Shiraz","Teheran","Tabriz"] },
    { q:"Ce proces descrie trecerea solid ‚Üí gaz direct?", c:"Sublimare", o:["Condensare","Sublimare","Topire","Depunere"] },
    { q:"Ce fluviu formeazƒÉ o mare parte din grani»õa dintre SUA »ôi Mexic?", c:"Rio Grande", o:["Colorado","Rio Grande","Missouri","Columbia"] },
    { q:"Cine a scris ‚ÄûStrƒÉinul‚Äù?", c:"Albert Camus", o:["Sartre","Albert Camus","Kafka","Orwell"] },
    { q:"Care este capitala Croa»õiei?", c:"Zagreb", o:["Split","Zagreb","Dubrovnik","Rijeka"] },
    { q:"√én fizicƒÉ, ce mƒÉrime se mƒÉsoarƒÉ √Æn pascali (Pa)?", c:"Presiunea", o:["For»õa","Presiunea","Energia","Puterea"] },
    { q:"Ce planetƒÉ are cea mai mare √Ænclina»õie axialƒÉ (aprox.)?", c:"Uranus", o:["Marte","Uranus","Jupiter","Venus"] },


    { q:"Care este capitala Kazahstanului (nume folosit oficial √Æn prezent, √Æn mod uzual)?", c:"Astana", o:["Almaty","Astana","Nur-Sultan","Shymkent"] },
    { q:"Ce scriere a fost folositƒÉ √Æn Egiptul antic pentru texte monumentale?", c:"Hieroglife", o:["CuneiformƒÉ","Hieroglife","RunicƒÉ","GreacƒÉ"] },
    { q:"Ce acid se gƒÉse»ôte √Æn o»õet?", c:"Acid acetic", o:["Acid citric","Acid acetic","Acid sulfuric","Acid lactic"] },
    { q:"Care este capitala Boliviei (constitu»õionalƒÉ)?", c:"Sucre", o:["La Paz","Sucre","Santa Cruz","Cochabamba"] },
    { q:"Ce √ÆnseamnƒÉ ‚ÄûPCR‚Äù √Æn biologie molecularƒÉ?", c:"Reac»õia de polimerizare √Æn lan»õ", o:["Protein Coding Reaction","Reac»õia de polimerizare √Æn lan»õ","Proces celular rapid","Proba clinicƒÉ reactivƒÉ"] },
    { q:"Ce artist este asociat cu ‚ÄûCampbell‚Äôs Soup Cans‚Äù?", c:"Andy Warhol", o:["Banksy","Andy Warhol","Hopper","Pollock"] },
    { q:"Ce str√¢mtoare leagƒÉ Marea NeagrƒÉ de Marea Marmara?", c:"Bosfor", o:["Dardanele","Bosfor","Gibraltar","Skagerrak"] },
    { q:"√én economie, ce √ÆnseamnƒÉ PIB?", c:"Produs Intern Brut", o:["Pre»õ Intern Brut","Produs Intern Brut","Profit Intern Brut","Produc»õie InternƒÉ de BazƒÉ"] },
    { q:"Care este capitala Senegalului?", c:"Dakar", o:["Accra","Dakar","Abuja","Bamako"] },
    { q:"Ce planetƒÉ are cea mai densƒÉ atmosferƒÉ dintre cele terestre?", c:"Venus", o:["Mercur","Venus","Marte","PƒÉm√¢nt"] },


    { q:"Care este capitala Filipinelor?", c:"Manila", o:["Cebu","Manila","Davao","Quezon City"] },
    { q:"Ce teoremƒÉ leagƒÉ laturile √Æntr-un triunghi dreptunghic?", c:"Teorema lui Pitagora", o:["Thales","Pitagora","Gauss","Fermat"] },
    { q:"√én ce ora»ô se aflƒÉ sediul ONU?", c:"New York", o:["Geneva","New York","Haga","Paris"] },
    { q:"Ce mare explorator a √Ænconjurat primul globul (expedi»õia sa)?", c:"Magellan (expedi»õia)", o:["Columb","Magellan (expedi»õia)","Vasco da Gama","Cook"] },
    { q:"Ce element chimic are simbolul Sn?", c:"Staniu", o:["Sodiu","Staniu","Siliciu","Stron»õiu"] },
    { q:"Care este capitala Albaniei?", c:"Tirana", o:["Tirana","Shkod√´r","Durr√´s","Vlor√´"] },
    { q:"√én anatomie, ce os este cel mai lung din corp?", c:"Femurul", o:["Tibia","Femurul","Humerus","Radius"] },
    { q:"Ce fenomen explicƒÉ devierea v√¢nturilor datoritƒÉ rota»õiei PƒÉm√¢ntului?", c:"Efectul Coriolis", o:["Efect Doppler","Efect Coriolis","Efect Joule","Efect Hall"] },
    { q:"Care este capitala Islandei?", c:"Reykjav√≠k", o:["Reykjav√≠k","Akureyri","Keflav√≠k","Selfoss"] },
    { q:"√én ce secol a trƒÉit Galileo Galilei (majoritar)?", c:"Secolul XVII", o:["Secolul XV","Secolul XVI","Secolul XVII","Secolul XVIII"] },

    
    { q:"Care este capitala Myanmarului (oficialƒÉ)?", c:"Naypyidaw", o:["Yangon","Mandalay","Naypyidaw","Bagan"] },
    { q:"Ce r√¢u traverseazƒÉ ora»ôul Londra?", c:"Tamisa", o:["Severn","Tamisa","Trent","Mersey"] },
    { q:"Ce scriere a folosit Mesopotamia anticƒÉ?", c:"CuneiformƒÉ", o:["CuneiformƒÉ","Hieroglife","LatinƒÉ","AramaicƒÉ"] },
    { q:"Care este capitala Camerunului?", c:"Yaound√©", o:["Douala","Yaound√©","Libreville","Lom√©"] },
    { q:"Ce parte a creierului coordoneazƒÉ echilibrul »ôi mi»ôcƒÉrile fine?", c:"Cerebelul", o:["Hipotalamus","Cerebelul","Amigdala","Trunchiul cerebral"] },
    { q:"Care este principalul gaz responsabil de efectul de serƒÉ antropogen (prin volum, uzual men»õionat)?", c:"Dioxidul de carbon", o:["Metan","Dioxidul de carbon","Oxid de azot","Ozon"] },
    { q:"Cine a scris ‚Äû1984‚Äù?", c:"George Orwell", o:["Aldous Huxley","George Orwell","Ray Bradbury","Jules Verne"] },
    { q:"Ce este un ‚Äûisotop‚Äù?", c:"Atomi ai aceluia»ôi element cu numƒÉr diferit de neutroni", o:["Atomi diferi»õi cu electroni identici","Atomi ai aceluia»ôi element cu numƒÉr diferit de neutroni","Molecule fƒÉrƒÉ sarcinƒÉ","Particule fƒÉrƒÉ masƒÉ"] },
    { q:"Care este capitala Lituaniei?", c:"Vilnius", o:["Vilnius","Riga","Tallinn","Kaunas"] },
    { q:"Care este capitala Estoniei?", c:"Tallinn", o:["Tallinn","Tartu","Vilnius","Riga"] },

  ];

  // ===== STATE =====
  let mode = null;                // 'mix' | 'hard'
  let activeQuestions = [];       // dupƒÉ mod
  let order = [];                 // indici amesteca»õi (fƒÉrƒÉ repetƒÉri)
  let optionsMap = {};            // key "t-q" -> array op»õiuni amestecate (persist)
  let answered = false;
  let gameState = "playing";      // playing | testDone | allDone
  let testIndex = 0;
  let qIndex = 0;
  let scoreTest = 0;
  let scoreTotal = 0;

  // lock/unlock + scores per test
  // unlockedUpTo = ultimul test deblocat (index 0-based). implicit 0 (doar primul)
  let unlockedUpTo = 0;
  let testScores = []; // scor pe test (0..10), -1 = nefƒÉcut

  function totalTests(){
    return Math.ceil(activeQuestions.length / QUESTIONS_PER_TEST);
  }

  // ===== STORAGE =====
  function saveProgress(){
    const data = {
      mode,
      activeLen: activeQuestions.length,
      order,
      optionsMap,
      answered,
      gameState,
      testIndex, qIndex,
      scoreTest, scoreTotal,
      unlockedUpTo,
      testScores
    };
    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
  }

  function loadProgress(){
    const raw = localStorage.getItem(STORAGE_KEY);
    if(!raw) return false;
    try{
      const data = JSON.parse(raw);
      if(!data.mode) return false;

      mode = data.mode;
      activeQuestions = (mode === "hard")
        ? HARD_QUESTIONS.slice()
        : EASY_QUESTIONS.concat(HARD_QUESTIONS);

      if(!Array.isArray(data.order) || data.order.length !== activeQuestions.length) return false;

      order = data.order;
      optionsMap = data.optionsMap || {};
      answered = !!data.answered;
      gameState = data.gameState || "playing";
      testIndex = data.testIndex ?? 0;
      qIndex = data.qIndex ?? 0;
      scoreTest = data.scoreTest ?? 0;
      scoreTotal = data.scoreTotal ?? 0;

      unlockedUpTo = data.unlockedUpTo ?? 0;
      testScores = Array.isArray(data.testScores) ? data.testScores : Array(totalTests()).fill(-1);

      // asigurƒÉ lungimea
      if(testScores.length !== totalTests()){
        testScores = Array(totalTests()).fill(-1);
      }

      return true;
    } catch {
      return false;
    }
  }

  function resetGame(newMode){
    mode = newMode;
    activeQuestions = (mode === "hard")
      ? HARD_QUESTIONS.slice()
      : EASY_QUESTIONS.concat(HARD_QUESTIONS);

    order = shuffleArray([...Array(activeQuestions.length).keys()]);
    optionsMap = {};
    answered = false;
    gameState = "playing";
    testIndex = 0;
    qIndex = 0;
    scoreTest = 0;
    scoreTotal = 0;

    unlockedUpTo = 0;
    testScores = Array(totalTests()).fill(-1);

    saveProgress();
  }

  // ===== TEST PICKER UI =====
  function renderTestsGrid(){
    const grid = document.getElementById("testsGrid");
    grid.innerHTML = "";

    for(let i=0; i<totalTests(); i++){
      const locked = i > unlockedUpTo;
      const tile = document.createElement("div");
      tile.className = "test-tile" + (locked ? " locked" : "");

      const icon = locked ? "üîí" : "üß†";
      const score = testScores[i];

      tile.innerHTML = `
        <div class="test-icon">${icon}</div>
        <div class="test-num">Test ${i+1}</div>
        <div class="test-sub">${locked ? "Blocat" : "Disponibil"}</div>
        <div class="test-score">${score >= 0 ? `Scor: ${score}/10` : "NefƒÉcut"}</div>
      `;

      tile.onclick = () => {
        if(locked) return;
        startTest(i);
        closeTests();
      };

      grid.appendChild(tile);
    }
  }

  function openTests(){
  renderTestsGrid();

  const banner = document.getElementById("totalScoreBanner");
  if (banner) {
    banner.innerText = `Scor total: ${scoreTotal}/${activeQuestions.length}`;
  }
  showOverlay("overlayTests", true);
  }

  function closeTests(){
    showOverlay("overlayTests", false);
  }
  function confirmChangeMode(){
    // schimbƒÉ modul -> √Æncepe joc nou, alege din nou
    localStorage.removeItem(STORAGE_KEY);
    showOverlay("overlayTests", false);
    showOverlay("overlayMode", true);
  }

  // ===== GAME LOGIC =====
  function getQuestion(tI, qI){
    const globalPos = tI * QUESTIONS_PER_TEST + qI;
    const idx = order[globalPos];
    return activeQuestions[idx];
  }
  function currentQ(){
    return getQuestion(testIndex, qIndex);
  }

  function updateMeta(){
  const progressEl = document.getElementById("progress");
  const scoreEl = document.getElementById("score");

  // c√¢te √ÆntrebƒÉri are testul curent (ultimul poate avea mai pu»õine)
  const remaining = activeQuestions.length - testIndex * QUESTIONS_PER_TEST;
  const totalInThisTest = Math.min(QUESTIONS_PER_TEST, remaining);

  if(gameState === "playing"){
    progressEl.innerText = `Test ${testIndex + 1}\n√éntrebare ${qIndex + 1}/${totalInThisTest}`;
  } else if(gameState === "testDone"){
    progressEl.innerText = `Test ${testIndex + 1}\nFinalizat`;
  } else {
    progressEl.innerText = `Toate testele\nFinalizate`;
  }

  // dreapta sus: doar scorul testului
  scoreEl.innerText = `Scor test: ${scoreTest}/${QUESTIONS_PER_TEST}`;
}

  function buildAnswers(){
    const answersDiv = document.getElementById("answers");
    answersDiv.innerHTML = "";
    answersDiv.style.display = "none";

    const key = `${testIndex}-${qIndex}`;
    if(!Array.isArray(optionsMap[key])){
      optionsMap[key] = shuffleArray([...currentQ().o]);
      saveProgress();
    }

    optionsMap[key].forEach(opt => {
      const btn = document.createElement("button");
      btn.innerText = opt;
      btn.className = "answer-btn";
      btn.onclick = () => checkOption(btn, opt);
      answersDiv.appendChild(btn);
    });
  }

  function loadQuestion(){
    answered = false;
    gameState = "playing";

    document.getElementById("badge").style.display = "none";
    document.getElementById("badge").innerText = "";

    document.getElementById("question").innerText = currentQ().q;
    document.getElementById("textAnswer").value = "";
    document.getElementById("result").innerText = "";
    document.getElementById("hint").innerText = "";

    // Next dezactivat p√¢nƒÉ rƒÉspunzi
    setNextEnabled(false);

    buildAnswers();
    setControlsEnabled(true);
    updateMeta();
    saveProgress();
  }

  function startTest(i){
    // porne»ôti √Æntotdeauna de la √Æntrebarea 1 a testului
    testIndex = i;
    qIndex = 0;
    scoreTest = 0;
    document.getElementById("nextBtn").innerText = "UrmƒÉtoarea √Æntrebare";
    loadQuestion();
  }

  function toggleAnswers(){
    if(gameState !== "playing") return;
    document.getElementById("answers").style.display = "block";
  }

  function disableAllAnswers(){
    document.querySelectorAll(".answer-btn").forEach(b => b.classList.add("disabled"));
  }

  function showResult(ok, chosenBtn){
    if(answered || gameState !== "playing") return;
    answered = true;

    if(ok){
      scoreTest++;
      scoreTotal++;
      document.getElementById("result").innerText = "‚úÖ Corect!";
      if(chosenBtn) chosenBtn.classList.add("correct");
    } else {
      document.getElementById("result").innerText = "‚ùå Gre»ôit!";
      const c = currentQ().c;
      const pretty = Array.isArray(c) ? c[0] : c;
      document.getElementById("hint").innerText = "RƒÉspuns corect: " + pretty;
      if(chosenBtn) chosenBtn.classList.add("wrong");
    }

    disableAllAnswers();
    setControlsEnabled(false);

    // Next devine activ
    setNextEnabled(true);

    updateMeta();
    saveProgress();
  }

  function checkOption(btn, opt){
  // DacƒÉ utilizatorul a ales una din variante, considerƒÉm corect
  // dacƒÉ varianta aleasƒÉ este "varianta corectƒÉ" din lista de op»õiuni a √ÆntrebƒÉrii.
  const q = currentQ();

  // DeterminƒÉm care op»õiune din q.o corespunde rƒÉspunsului corect (q.c).
  // AcceptƒÉm »ôi cazurile c√¢nd q.c e listƒÉ de sinonime.
  const correctList = Array.isArray(q.c) ? q.c : [q.c];

  // GƒÉsim indexul op»õiunii corecte √Æn lista originalƒÉ de op»õiuni (q.o)
  let correctIdx = -1;
  for (let i = 0; i < q.o.length; i++) {
    const optionText = q.o[i];
    if (correctList.some(c => isCorrectAnswer(optionText, c) || isCorrectAnswer(c, optionText))) {
      correctIdx = i;
      break;
    }
  }

  // Indexul op»õiunii selectate
  const chosenIdx = q.o.indexOf(opt);

  // fallback: dacƒÉ nu gƒÉsim index, revenim la verificarea textului (sƒÉ nu se rupƒÉ)
  const ok = (correctIdx !== -1 && chosenIdx !== -1)
    ? (chosenIdx === correctIdx)
    : isCorrectAnswer(opt, q.c);

  showResult(ok, btn);
}


  function checkTextAnswer(){
    const val = document.getElementById("textAnswer").value;
    showResult(isCorrectAnswer(val, currentQ().c), null);
  }

  function finishTest(){
    gameState = (testIndex < totalTests()-1) ? "testDone" : "allDone";

    // salveazƒÉ scor test
    testScores[testIndex] = scoreTest;

    // Deblocare: dacƒÉ scorTest >= 7, deblocheazƒÉ urmƒÉtorul test (dacƒÉ existƒÉ)
    if(scoreTest >= UNLOCK_THRESHOLD && testIndex + 1 > unlockedUpTo){
      unlockedUpTo = Math.min(testIndex + 1, totalTests()-1);
    }

    document.getElementById("question").innerText =
      (gameState === "testDone") ? "‚úÖ Test finalizat!" : "üéâ Ai terminat toate testele!";

    document.getElementById("result").innerText = `Scor test: ${scoreTest}/${QUESTIONS_PER_TEST}`;
    document.getElementById("hint").innerText =
      `Scor total: ${scoreTotal}/${activeQuestions.length} ‚Ä¢ Deblocare: ${scoreTest >= UNLOCK_THRESHOLD ? "DA ‚úÖ" : "NU ‚ùå (ai nevoie de 7/10)"}`;

    const badge = document.getElementById("badge");
    badge.style.display = "block";

    if(gameState === "testDone"){
  const unlockedTest = (scoreTest >= UNLOCK_THRESHOLD) ? Math.min(testIndex + 1, totalTests() - 1) : null;

  if (unlockedTest !== null && unlockedTest > testIndex) {
    badge.innerText = `Ai deblocat Testul ${unlockedTest + 1}! (apasƒÉ aici)`;
    badge.classList.add("clickable");

    // click -> porne»ôte testul deblocat
    badge.onclick = () => {
      // √Ænchide orice overlay (sigur)
      showOverlay("overlayTests", false);
      showOverlay("overlayMode", false);

      // porne»ôte direct testul deblocat
      startTest(unlockedTest);

      // ascunde badge dupƒÉ click (op»õional)
      badge.style.display = "none";
      badge.onclick = null;
      badge.classList.remove("clickable");
    };
  } else {
    badge.innerText = `Nu ai deblocat urmƒÉtorul test. (Ai nevoie de minim ${UNLOCK_THRESHOLD}/10)`;
    badge.classList.remove("clickable");
    badge.onclick = null;
  }
} else {
  badge.innerText = `FelicitƒÉri! Ai terminat modul ${mode === "hard" ? "Hard" : "Mix"}!`;
  badge.classList.remove("clickable");
  badge.onclick = null;
}


    document.getElementById("answers").style.display = "none";
    document.getElementById("answers").innerHTML = "";
    setControlsEnabled(false);

    setNextEnabled(true);
    document.getElementById("nextBtn").innerText =
      (gameState === "testDone") ? "√énapoi la teste" : "Reia de la √Ænceput";

    updateMeta();
    saveProgress();
  }

  function nextStep(){
    // dacƒÉ s-a terminat testul: du-te la lista de teste
    if(gameState === "testDone"){
      openTests();
      return;
    }

    // dacƒÉ s-a terminat tot: restart -> alege modul
    if(gameState === "allDone"){
      localStorage.removeItem(STORAGE_KEY);
      showOverlay("overlayMode", true);
      return;
    }

    // playing: nu permitem sƒÉ sari peste √Æntrebare
    if(!answered) return;

    qIndex++;
    const globalPos = testIndex * QUESTIONS_PER_TEST + qIndex;

    if(qIndex >= QUESTIONS_PER_TEST || globalPos >= activeQuestions.length){
      finishTest();
    } else {
      loadQuestion();
    }
  }

  // ===== START NEW GAME =====
  function startNewGame(newMode){
    showOverlay("overlayMode", false);
    resetGame(newMode);
    // dupƒÉ alegerea modului -> aratƒÉ iconi»õele testelor
    openTests();
  }

  // ===== STARTUP =====
if (loadProgress()) {
  showOverlay("overlayMode", false);

  // dacƒÉ e»ôti √Æn mijlocul jocului, intri direct acolo; altfel la test list
  if (gameState === "playing") {
    loadQuestion();
  } else if (gameState === "testDone") {
    // aratƒÉ rezultatul testului curent »ôi apoi user apasƒÉ "√énapoi la teste"
    finishTest();
  } else {
    // allDone
    document.getElementById("question").innerText = "üéâ Ai terminat!";
    document.getElementById("result").innerText = "";
    document.getElementById("hint").innerText = "";
    setControlsEnabled(false);
    setNextEnabled(true);
    document.getElementById("nextBtn").innerText = "Reia de la √Ænceput";
    updateMeta();
  }
} else {
  showOverlay("overlayMode", true);
}
</script>

</body>
</html>
